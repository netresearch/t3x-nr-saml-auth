# Custom Apache configuration for Multi-TYPO3-Version Setup

# V12 Configuration
<VirtualHost *:80>
    ServerName v12.nr-saml-auth.ddev.site
    ServerAlias v12.ddev.site
    DocumentRoot /var/www/html/.build/v12/public

    <Directory "/var/www/html/.build/v12/public">
        AllowOverride All
        Require all granted
        Options +Indexes +FollowSymLinks
    </Directory>

    SetEnv TYPO3_CONTEXT Development
</VirtualHost>

<VirtualHost *:443>
    ServerName v12.nr-saml-auth.ddev.site
    ServerAlias v12.ddev.site
    DocumentRoot /var/www/html/.build/v12/public

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/master.crt
    SSLCertificateKeyFile /etc/ssl/certs/master.key

    <Directory "/var/www/html/.build/v12/public">
        AllowOverride All
        Require all granted
        Options +Indexes +FollowSymLinks
    </Directory>

    SetEnv TYPO3_CONTEXT Development
</VirtualHost>

# V13 Configuration
<VirtualHost *:80>
    ServerName v13.nr-saml-auth.ddev.site
    ServerAlias v13.ddev.site
    DocumentRoot /var/www/html/.build/v13/public

    <Directory "/var/www/html/.build/v13/public">
        AllowOverride All
        Require all granted
        Options +Indexes +FollowSymLinks
    </Directory>

    SetEnv TYPO3_CONTEXT Development
</VirtualHost>

<VirtualHost *:443>
    ServerName v13.nr-saml-auth.ddev.site
    ServerAlias v13.ddev.site
    DocumentRoot /var/www/html/.build/v13/public

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/master.crt
    SSLCertificateKeyFile /etc/ssl/certs/master.key

    <Directory "/var/www/html/.build/v13/public">
        AllowOverride All
        Require all granted
        Options +Indexes +FollowSymLinks
    </Directory>

    SetEnv TYPO3_CONTEXT Development
</VirtualHost>

# Fallback/Root - Landing Page
<VirtualHost *:80>
    ServerName nr-saml-auth.ddev.site
    DocumentRoot /var/www/html
    DirectoryIndex index.php index.html
    <Directory "/var/www/html">
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:443>
    ServerName nr-saml-auth.ddev.site
    DocumentRoot /var/www/html
    DirectoryIndex index.php index.html

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/master.crt
    SSLCertificateKeyFile /etc/ssl/certs/master.key

    <Directory "/var/www/html">
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
